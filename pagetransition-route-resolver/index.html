<!DOCTYPE html>

<head>

    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">

    <title>
        Cavemans SPA
    </title>

    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.7/semantic.min.css"
          integrity="sha256-wT6CFc7EKRuf7uyVfi+MQNHUzojuHN2pSw0YWFt2K5E="
          crossorigin="anonymous"/>
</head>

<body style="overflow-y: hidden">
<div class="cavemansspa-app cavemansspa-header"></div>
<div class="cavemansspa-app cavemansspa-route"></div>
<div class="cavemansspa-app cavemansspa-footer"></div>

<script>
    const CavemansSPA = {}
    document.addEventListener("DOMContentLoaded", function (event) {
        var routeResolvers = new StatefulRouteResolver({
            onrender: CavemansSPA.PageTransition.static.onrender,
            routes: [
                {path: "/", baseComponent: CavemansSPA.Home},
                {path: "/page1", baseComponent: CavemansSPA.Page1},
                {path: "/page2/:id", baseComponent: CavemansSPA.Page2}
            ]
        })

        m.render(document.body, m("div", {
                style: {
                    display: "grid",
                    height: "100%",
                    "grid-gap": "3px 3px",
                    "grid-template-columns":"1fr 1fr 1fr",
                    "grid-template-rows": "50px auto 50px"
                }
            }, [
                m(".cavemansspa-app.cavemansspa-header", {style: {"background-color": "gray", "grid-area": "1 / 1 / auto / 4"}}),
                m(".cavemansspa-app.cavemansspa-route", {
                    style: {
                        "background-color": "rgb(239, 239, 239)",
                        'grid-column': '1 / 4',
                        "overflow-y": "auto"
                    }
                }),
                m(".cavemansspa-app.cavemansspa-footer", {
                    style: {
                        backgroundColor: 'gray',
                        'grid-column': '1 / 4',
                        'grid-row': 3
                    }
                })
            ]
        ))

        m.mount(document.querySelector('.cavemansspa-app.cavemansspa-header'), {
            view: function(vnode) {
                return m('div', {style: {width: '100%', height: '100px'}}, 'this is the header')
            }
        })
        m.route(document.querySelector('.cavemansspa-app.cavemansspa-route'), "/", routeResolvers)
        m.mount(document.querySelector('.cavemansspa-app.cavemansspa-footer'), {
            view: function(vnode) {
                return m('div', {style: {width: '100%', height: '100px'}}, 'this is the footer')
            }
        })
    })
</script>

<script src="https://rawgit.com/lhorie/mithril.js/next/mithril.js" type="text/javascript"></script>
<script src="/pagetransition-route-resolver/PageTransition.js" type="text/javascript"></script>
<script src="/pagetransition-route-resolver/Home.js" type="text/javascript"></script>
<script src="/pagetransition-route-resolver/Page1.js" type="text/javascript"></script>
<script src="/pagetransition-route-resolver/StatefulRouteResolver.js" type="text/javascript"></script>


</body>
